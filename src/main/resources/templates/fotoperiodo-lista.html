<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Lista de Fotoperiodo</title>
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

	<style>
		body {
			background: url('https://ichef.bbci.co.uk/ace/ws/640/cpsprodpb/8983/production/_109730253_gettyimages-658291850.jpg.webp') no-repeat center center fixed;
			background-size: cover;
			color: #f8f9fa;
			animation: backgroundFade 10s infinite alternate;
			/* Efecto de animación suave */
		}

		.header,
		.footer {
			background-color: rgba(38, 31, 89, 0.8);
			color: white;
			padding: 20px;
			text-align: center;
		}

		.navbar {
			margin-bottom: 20px;
		}

		.station-buttons,
		.button-container {
			display: flex;
			flex-wrap: wrap;
			justify-content: center;
			margin: 20px 0;
		}

		.station-button,
		.button-custom {
			margin: 10px;
			background-color: #216923;
			color: white;
			padding: 12px 25px;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			font-size: 16px;
			font-weight: bold;
			transition: background-color 0.3s ease;
		}

		.station-button:hover {
			background-color: #45a049;
			box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.3);
		}

		.button-custom:hover {
			background-color: #0056b3;
			/* Color más oscuro al hacer hover */
			box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.2);
			/* Sombra al hacer hover */
		}


		/* Estilo para el select */
		#estacionSelect {
			background-color: #ffffff;
			/* Fondo blanco para resaltar */
			border-radius: 10px;
			/* Bordes redondeados */
			box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
			/* Sombra sutil */
			padding: 0.75rem 1rem;
			/* Espaciado interno */
			background-color: #f8f9fa;
			/* Color de fondo sutil */
			transition: all 0.3s ease;
			/* Efecto de transición */
		}

		/* Efecto al hacer hover */
		#estacionSelect:hover {
			border-color: #007bff;
			/* Color de borde al pasar el mouse */
			box-shadow: 0 2px 10px rgba(0, 123, 255, 0.2);
			/* Sombra más intensa */
			border: 2px solid #007bff;
			/* Añadir borde azul cuando se pasa el ratón */
		}

		/* Efecto al tener foco (cuando el usuario hace clic en el select) */
		#estacionSelect:focus {
			border-color: #007bff;
			box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
			border-width: 2px;
			/* Aumentar grosor del borde */
		}

		/* Etiqueta del campo */
		.form-label {
			font-weight: 600;
			/* Aumenta el peso de la fuente */
			color: #e9ecef;
			/* Color claro para la etiqueta */
			margin-bottom: 0.5rem;
			/* Espaciado debajo de la etiqueta */
		}


		.excel-table {
			background-color: rgba(255, 255, 255, 0.9);
			color: #333;
			border-collapse: collapse;
			width: 100%;
			margin-top: 20px;
		}

		.excel-table th,
		.excel-table td {
			border: 1px solid #bbb;
			padding: 12px 15px;
			/* Más espacio entre celdas */
			text-align: center;
			font-size: 14px;
		}

		.excel-table th {
			background-color: #e8e8e8;
			font-weight: bold;
		}

		.actions {
			color: blue;
		}

		.footer p {
			margin: 0;
			font-size: 14px;
		}

		@keyframes backgroundFade {
			0% {
				filter: brightness(80%);
			}

			100% {
				filter: brightness(100%);
			}
		}
	</style>
</head>

<body>
	<nav class="navbar navbar-expand-lg navbar-light bg-light">
		<a class="navbar-brand" href="/administrador/index">WikiPlant</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
			aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse justify-content-end" id="navbarNav">
			<ul class="navbar-nav">
				<li class="nav-item">
					<a class="btn btn-outline-danger my-2 my-sm-0" href="/">Logout</a>
				</li>
			</ul>
		</div>
	</nav>

	<div class="container mt-4">
		<!-- Back Button -->
		<div class="button-container">
			<button onclick="history.back()" class="button-custom">Volver a la página anterior</button>
		</div>

		<!-- Header Section -->
		<header class="header">
			<h1>FACULTAD DE AGRONOMÍA - U.C.V. - SERVICIO DE CLIMATOLOGÍA AGRÍCOLA</h1>
			<p>Elemento: FOTOPERÍODO (horas)</p>
		</header>

		<!-- Dropdown to select station -->
		<div class="form-group mb-4">
			<label for="estacionSelect" class="form-label">Estación</label>
			<select th:field="*{estacionId}" class="form-select" required onchange="filterFotoperiodo(this.value)">
				required>
				<option value="" disabled selected>Seleccione una estación</option>
				<option th:each="estacion : ${estaciones}" th:value="${estacion.id}" th:text="${estacion.nombre}"></option>
			</select>
		</div>


		<!-- Table Section -->
		<table class="excel-table" id="fotoperiodoTable">
			<thead>
				<tr>
					<th>AÑO</th>
					<th>ENE</th>
					<th>FEB</th>
					<th>MAR</th>
					<th>ABR</th>
					<th>MAY</th>
					<th>JUN</th>
					<th>JUL</th>
					<th>AGO</th>
					<th>SEP</th>
					<th>OCT</th>
					<th>NOV</th>
					<th>DIC</th>
					<th>ANUAL</th>
					<th class="actions">Acciones</th>
				</tr>
			</thead>
			<tbody id="fotoperiodoBody">
				<!-- Aquí se agregarán las filas de la tabla según la estación seleccionada -->
			</tbody>
		</table>
	</div>

	<!-- Footer Section -->
	<footer class="footer">
		<div class="container">
			<p>&copy; 2024 WikiPlant. Todos los derechos reservados.</p>
		</div>
	</footer>

	<!-- Bootstrap JS and dependencies -->
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

	<script>
// Función para filtrar los fotoperíodos según la estación
function filterFotoperiodo(estacionId) {
    fetch(`/fotoperiodo/estacion/${estacionId}`)
        .then(response => response.json())
        .then(data => {
            const tableBody = document.getElementById("fotoperiodoBody");
            tableBody.innerHTML = ""; // Limpiar tabla antes de agregar nuevos resultados
            
            // Verificar si no hay datos y mostrar mensaje
            if (data.length === 0) {
                tableBody.innerHTML = "<tr><td colspan='15'>No hay datos disponibles para esta estación.</td></tr>";
                return; // Salir de la función para evitar agregar filas vacías
            }

            // Agregar las filas de la tabla
            data.forEach(fotoperiodo => {
                let row = document.createElement("tr");
                row.innerHTML = `
                    <td>${fotoperiodo.fecha}</td>
                    <td>${fotoperiodo.Enero}</td>
                    <td>${fotoperiodo.Febrero}</td>
                    <td>${fotoperiodo.Marzo}</td>
                    <td>${fotoperiodo.Abril}</td>
                    <td>${fotoperiodo.Mayo}</td>
                    <td>${fotoperiodo.Junio}</td>
                    <td>${fotoperiodo.Julio}</td>
                    <td>${fotoperiodo.Agosto}</td>
                    <td>${fotoperiodo.Septiembre}</td>
                    <td>${fotoperiodo.Octubre}</td>
                    <td>${fotoperiodo.Noviembre}</td>
                    <td>${fotoperiodo.Diciembre}</td>
                    <td>${fotoperiodo.anual}</td>
                    <td class="actions">
                        <a href="#" class="btn btn-sm btn-primary">Editar</a>
                        <a href="#" class="btn btn-sm btn-danger">Eliminar</a>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        })
        .catch(error => console.log("Error al obtener los fotoperíodos: ", error));
}
</script>

</body>

</html>